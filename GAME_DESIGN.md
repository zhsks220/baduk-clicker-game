# 바둑돌 부수기 - 게임 기획서

## 스토리
체스 왕국이 바둑 왕국의 침략을 받았다.
바둑돌들을 부수기 위해 폰이 점차 진화하며,
바둑 왕국을 몰아내고 체스 왕국을 지키는 것이 목표.

## 핵심 메카닉
- **클릭 대상**: ⚫ 바둑돌 (부숴서 골드 획득)
- **강화 대상**: ♟️ 체스말 (폰 → 나이트 → 비숍 → 룩 → 퀸 → 킹 → 황제신왕)
- **메인 컨텐츠**: 화폐로 확률 강화

## 플랫폼
- 토스 앱인앱 (미니앱)

## 구현된 기능

### 핵심 시스템
- 클릭으로 골드 획득
- 체스말 강화 시스템 (+1 ~ +10)
- 업그레이드 (클릭당 골드, 공격력, 치명타)
- 자동 클리커
- 상점 (파괴방지권, 축복주문서, 행운주문서, 부스터)
- 일일 미션 5개
- 업적 10개
- 환생 시스템 (루비 + 영구 골드 보너스)
- 오프라인 보상
- 스토리 인트로 모달

### 바둑돌 시스템 (2025-12-05 구현)
- **바둑돌 종류**: 검은돌/흰돌 × 소/중/대 (6종류)
- **HP 시스템**: 소(5HP), 중(10HP), 대(20HP)
- **출현 확률**: 소 50%, 중 35%, 대 15%
- **파괴 보너스**: 바둑돌 총 획득 골드의 33%/66%/99% 랜덤 추가

### 시각 효과 (2025-12-05 구현)
- **SVG 기반 크랙 패턴**: HP에 따라 3단계 금이 생김
  - 레벨 1 (70~40% HP): 작은 금 1개
  - 레벨 2 (40~20% HP): 중간 금 2개
  - 레벨 3 (20% 이하): 큰 금 5개 + 붉은 펄스 효과 + 흔들림
- **파괴 파티클 효과**: 12개 파편이 중력 적용되어 흩어짐
- **파괴 플래시 효과**: 밝은 빛 + 스케일 변화
- **크랙 드로잉 애니메이션**: SVG stroke-dashoffset으로 금이 그려지는 효과

---

## 수익화 모델 분석

### 토스 앱인토스 수익화 방식
| 방식 | 설명 | 수수료 |
|------|------|--------|
| **IAA (인앱광고)** | 전면형, 보상형 광고 | 토스 수수료 있음 (초기 제휴사 면제) |
| **IAP (인앱결제)** | 게임 아이템, 루비 등 비실물 재화 | 앱스토어/구글플레이 30% |
| **토스페이** | 실물 재화/서비스 | 토스페이 수수료 |

> ⚠️ 2025년 12월까지 초기 제휴사 서비스 수수료 무료 혜택 진행 중

### 권장 수익화 전략

#### 1. 보상형 광고 (IAA) - 주력
| 항목 | 내용 |
|------|------|
| **적용 위치** | 강화 실패 시 "광고 보고 재도전", 오프라인 보상 2배, 일일 무료 루비 |
| **예상 eCPM** | 한국 기준 $3~8 (보상형 동영상) |
| **장점** | 유저 거부감 낮음, 자발적 시청 |

#### 2. 인앱 결제 (IAP) - 보조
| 상품 | 가격(예시) | 내용 |
|------|------------|------|
| 루비 100개 | ₩1,100 | 기본 패키지 |
| 루비 500개 | ₩4,400 | 10% 보너스 |
| 루비 1,200개 | ₩9,900 | 20% 보너스 |
| 초보자 패키지 | ₩3,300 | 루비 200 + 파괴방지권 5개 |
| 월정액 패스 | ₩4,900 | 매일 루비 50개 + 광고 제거 |

#### 3. 하이브리드 모델 (권장)
- 무과금 유저: 광고로 수익화
- 과금 유저: IAP + 광고 제거 옵션
- 업계 트렌드: 상위 앱 65%가 광고+IAP 혼합 모델 사용

### 예상 수익 시뮬레이션

#### 가정
- DAU (일일 활성 유저): 1,000명
- 1인당 일일 광고 시청: 3회
- 보상형 광고 eCPM: $5 (약 ₩6,500)
- 결제 전환율: 2%
- ARPPU (결제자 평균 결제액): ₩10,000

#### 월간 예상 수익
| 항목 | 계산 | 금액 |
|------|------|------|
| **광고 수익** | 1,000 × 3 × 30일 × ₩6.5 | **₩585,000** |
| **IAP 수익** | 1,000 × 2% × ₩10,000 | **₩200,000** |
| **총 월 수익** | | **₩785,000** |

#### DAU별 예상 월 수익
| DAU | 광고 수익 | IAP 수익 | 총 수익 |
|-----|-----------|----------|---------|
| 1,000 | ₩585,000 | ₩200,000 | ₩785,000 |
| 5,000 | ₩2,925,000 | ₩1,000,000 | ₩3,925,000 |
| 10,000 | ₩5,850,000 | ₩2,000,000 | ₩7,850,000 |
| 50,000 | ₩29,250,000 | ₩10,000,000 | ₩39,250,000 |

---

## 운영비 분석

### 서버 비용 (백엔드)

#### 옵션 1: Supabase (권장)
| 플랜 | 가격 | 포함 내용 |
|------|------|-----------|
| Free | $0 | 500MB DB, 1GB 스토리지, 50,000 MAU 인증 |
| Pro | $25/월 | 8GB DB, 100GB 스토리지, 무제한 MAU |

> 💡 **초기 무료 플랜으로 시작 가능** - MAU 5만명까지 무료

#### 옵션 2: Firebase
| 항목 | 무료 한도 | 초과 시 |
|------|-----------|---------|
| 인증 | MAU 50,000 | 5만~10만: $0.055/MAU |
| Firestore | 1GB 저장, 50K 읽기/일 | 종량제 |
| Hosting | 10GB/월 | 종량제 |

#### 옵션 3: 서버리스 (LocalStorage만 사용)
- **현재 구현**: LocalStorage로 클라이언트 저장
- **비용**: $0
- **단점**: 기기 변경 시 데이터 손실, 랭킹 기능 불가

### 기타 운영비

| 항목 | 예상 비용 | 비고 |
|------|-----------|------|
| 도메인 | ₩15,000/년 | 토스 앱인앱은 불필요 |
| SSL 인증서 | ₩0 | Let's Encrypt 무료 |
| 광고 플랫폼 | ₩0 | AdMob 무료 (수익 배분 방식) |
| 개발자 계정 | ₩0 | 토스 앱인앱은 별도 계정 불필요 |

### 월간 운영비 시나리오

#### 시나리오 A: 최소 비용 (LocalStorage만)
| 항목 | 비용 |
|------|------|
| 서버 | ₩0 |
| 기타 | ₩0 |
| **총합** | **₩0** |

#### 시나리오 B: Supabase Free (MAU 5만 이하)
| 항목 | 비용 |
|------|------|
| Supabase | ₩0 |
| 기타 | ₩0 |
| **총합** | **₩0** |

#### 시나리오 C: Supabase Pro (MAU 5만 초과)
| 항목 | 비용 |
|------|------|
| Supabase Pro | ₩33,000 ($25) |
| 기타 | ₩0 |
| **총합** | **₩33,000/월** |

---

## 손익 분석

### 손익분기점 (BEP)

#### 시나리오 A (운영비 ₩0)
- **손익분기점**: DAU 1명부터 수익
- **순이익**: 매출 = 순이익

#### 시나리오 C (운영비 ₩33,000/월)
- **필요 DAU**: 약 43명 (₩33,000 ÷ ₩785 × 1,000)
- **손익분기점**: 매우 낮음

### DAU별 순이익 예상

| DAU | 월 수익 | 운영비 (시나리오C) | 순이익 | 이익률 |
|-----|---------|-------------------|--------|--------|
| 1,000 | ₩785,000 | ₩33,000 | ₩752,000 | 95.8% |
| 5,000 | ₩3,925,000 | ₩33,000 | ₩3,892,000 | 99.2% |
| 10,000 | ₩7,850,000 | ₩33,000 | ₩7,817,000 | 99.6% |
| 50,000 | ₩39,250,000 | ₩33,000 | ₩39,217,000 | 99.9% |

### 리스크 요인
1. **유저 획득 비용 (UA)**: 마케팅 비용 별도
2. **토스 수수료**: 정확한 요율 미공개 (초기 면제)
3. **광고 eCPM 변동**: 시즌/경기에 따라 ±50% 변동 가능
4. **IAP 수수료**: 앱스토어/구글플레이 30%

---

## 결론 및 권장사항

### 수익화 전략
1. **1단계 (런칭)**: 보상형 광고 중심 + 기본 IAP
2. **2단계 (MAU 1만+)**: 광고 최적화 + 시즌 패키지
3. **3단계 (MAU 5만+)**: Supabase Pro 전환 + 랭킹 시스템

### 예상 수익성
- **최소 DAU 1,000명 기준**: 월 75만원+ 순이익
- **목표 DAU 10,000명 기준**: 월 780만원+ 순이익
- **이익률**: 95% 이상 (서버 비용 극히 낮음)

### 핵심 성공 요소
1. 토스 앱인앱 초기 수수료 면제 혜택 활용
2. 보상형 광고로 유저 경험 해치지 않으면서 수익화
3. LocalStorage → Supabase 단계적 전환으로 비용 최적화

---

## 토스 앱인앱 출시 로드맵

> 📚 **공식 문서**: https://developers-apps-in-toss.toss.im/
> 🖥️ **콘솔**: https://apps-in-toss.toss.im/

---

### PHASE 1: 사전 준비 (1~2일)

#### 1-1. 필수 준비물
- [ ] **만 19세 이상** 본인 명의 토스앱 설치 및 인증
- [ ] **사업자 등록** (개인사업자 또는 법인)
- [ ] **토스 비즈니스 계정** 가입 (https://business.toss.im)

#### 1-2. 브랜드 에셋 준비
- [ ] **앱 로고**: 600×600px PNG, 각진 정사각형 (둥근 모서리 불가)
  - 컬러 배경 필수, 라이트/다크 모드 모두 가독성 확보
- [ ] **브랜드 컬러**: 헥스코드 준비 (예: #3182F6)
- [ ] **앱 이름**: 한글 권장, 특수문자 지양
- [ ] **앱 설명**: 서비스 소개 텍스트
- [ ] **고객센터 연락처**: 이메일 또는 전화번호

---

### PHASE 2: 콘솔 등록 (영업일 1~2일)

#### 2-1. 앱인토스 콘솔 가입
- [ ] https://apps-in-toss.toss.im 접속
- [ ] 토스 비즈니스 계정으로 로그인
- [ ] **워크스페이스 생성** (사업자번호당 1개)

#### 2-2. 미니앱 등록
- [ ] 앱 기본정보 입력:
  - 앱 이름, 앱 ID(appName)
  - 로고 업로드
  - 카테고리 선택: **게임**
  - 홈페이지, 고객센터 정보
- [ ] **검토 요청** → 영업일 1~2일 소요

#### 2-3. 사업자 인증
- [ ] 사업자등록증 업로드
- [ ] 대표관리자 지정
- [ ] 계약 약관 동의 (이메일로 안내)

---

### PHASE 3: 게임 개발 및 연동

#### 3-1. 필수 기술 요구사항
- [ ] **브릿지 뷰 설정**
  - 앱 진입 시 앱 이름, 로고, 브랜드 컬러 표시
  - 게임은 "다크모드 Inverted" 설정 권장
  - 로딩 시간 20초 이내
- [ ] **풀스크린 대응**
  - 디바이스 전체 화면 점유 (상단/하단 빈 영역 없음)
  - 레터박싱 발생 방지
- [ ] **내비게이션 바**
  - 우측 상단: 더보기(⋯) 버튼, 닫기(X) 버튼 필수
  - 종료 시 확인 모달: "바둑돌 부수기를 종료할까요?"
- [ ] **연령 등급 표시**
  - 전체이용가: 초기 화면 우측상단 3초 이상 표시

#### 3-2. 토스 SDK 연동
```javascript
// granite.config.mts 설정 예시
export default {
  brand: {
    displayName: '바둑돌 부수기',
    icon: 'https://cdn.example.com/logo.png',
    primaryColor: '#1a1a2e'
  }
}
```
- [ ] **토스 로그인 연동** (인앱결제 시 필수)
- [ ] **granite.config.mts** 설정 파일 작성

#### 3-3. 성능 최적화
- [ ] 초기 로딩 3초 이내
- [ ] 60fps 유지
- [ ] 메모리 누수 방지
- [ ] 백그라운드 전환 시 사운드 중지

#### 3-4. 접근성 준수
- [ ] 명도 대비 기준 충족
- [ ] 터치 영역 최소 44×44px
- [ ] 스크린 리더 대응 (선택)

---

### PHASE 4: 수익화 연동 (선택, 영업일 3~7일)

#### 4-1. 인앱광고 (IAA)
- [ ] 토스 광고 SDK 또는 AdMob 연동
- [ ] 보상형 광고 위치 설정:
  - 강화 실패 시 "광고 보고 재도전"
  - 오프라인 보상 2배
  - 일일 무료 루비

#### 4-2. 인앱결제 (IAP) - 필요 시
> ⚠️ **수수료**: 앱마켓 15% + 토스 5% = 총 20%

**사전 절차 (영업일 3~4일)**:
- [ ] 대표관리자 약관 동의 (콘솔에서)
- [ ] **KYC 진행** (특정금융정보법 본인확인, 3~4일)
- [ ] 토스 로그인 연동 완료

**상품 등록**:
- [ ] 상품 유형: 소모품(재구매) / 비소모품(영구)
- [ ] 상품명, 설명, 공급가 (400원~140만원, 10원 단위)
- [ ] 상품 이미지: 1024×1024px
- [ ] **검토 요청** → 영업일 2일 소요

| 상품명 | 유형 | 가격 |
|--------|------|------|
| 루비 100개 | 소모품 | ₩1,100 |
| 루비 500개 | 소모품 | ₩4,400 |
| 루비 1,200개 | 소모품 | ₩9,900 |
| 초보자 패키지 | 소모품 | ₩3,300 |

---

### PHASE 5: 테스트 및 QA

#### 5-1. 콘솔 테스트
- [ ] QR코드 테스트 (출시하기 메뉴)
  - 테스트 URL: `https://<appName>.private-apps.tossmini.com`
- [ ] 실제 토스앱에서 동작 확인

#### 5-2. 디바이스 테스트
- [ ] iOS (iPhone SE ~ iPhone 15 Pro Max)
- [ ] Android (다양한 해상도)
- [ ] 가로/세로 모드 전환 확인

#### 5-3. 기능 테스트
- [ ] 모든 게임 기능 정상 동작
- [ ] 결제 플로우 (샌드박스)
- [ ] 저장/불러오기
- [ ] 오프라인 → 온라인 복귀

---

### PHASE 6: 심사 및 출시 (영업일 3~5일)

#### 6-1. 출시 전 체크리스트
- [ ] 앱 정보 검토 완료
- [ ] 사업자 인증 완료
- [ ] 대표관리자 승인 완료

#### 6-2. 심사 가이드라인 확인

**✅ 허용**:
- 게임 콘텐츠
- 인앱 광고 (보상형)
- 인앱 결제 (게임 아이템)

**❌ 금지**:
- 자사 앱 설치 유도 ("앱 설치하면 더 좋아요" 문구)
- 외부 링크로 결제/다운로드 유도
- 사행성/복권/베팅 요소
- 현금성/환금성 이벤트
- 구독 상품

#### 6-3. 심사 제출
- [ ] 콘솔에서 "출시하기" 요청
- [ ] 심사 결과 대기 (영업일 3~5일)
- [ ] 피드백 있으면 수정 후 재제출

#### 6-4. 출시
- [ ] 심사 승인 확인
- [ ] 실서비스 URL: `https://<appName>.apps.tossmini.com`
- [ ] 토스앱 게임 메뉴에 노출

---

### PHASE 7: 출시 후 운영

#### 7-1. 모니터링
- [ ] 크래시 리포트 확인
- [ ] 사용자 분석 (DAU, 리텐션)
- [ ] 광고 수익 확인
- [ ] 결제 현황 확인

#### 7-2. 업데이트
- [ ] 버그 수정
- [ ] 신규 콘텐츠 추가
- [ ] 이벤트 운영

---

## 예상 일정 (총 2~3주)

| 단계 | 예상 소요 |
|------|-----------|
| PHASE 1: 사전 준비 | 1~2일 |
| PHASE 2: 콘솔 등록 | 영업일 1~2일 |
| PHASE 3: 개발 및 연동 | 3~7일 (개발 상태에 따라) |
| PHASE 4: 수익화 연동 | 영업일 3~7일 (선택) |
| PHASE 5: 테스트 | 2~3일 |
| PHASE 6: 심사 및 출시 | 영업일 3~5일 |

---

## 현재 프로젝트 상태

### ✅ 완료
- 게임 핵심 기능 구현
- 바둑돌 HP/크랙 시스템
- 강화/상점/미션/업적 시스템
- 환생/오프라인 보상
- Safe Area 대응 (`env(safe-area-inset-bottom)`)
- 사운드 미사용 (백그라운드 중지 불필요)
- 빠른 로딩 (Vite SPA)

---

## 🛠️ 구현 TODO 리스트

### 🔴 필수 (출시 전 반드시 구현)

#### TODO 1: 내비게이션 바 구현
- [ ] 우측 상단에 **더보기(⋯)** 버튼 추가
- [ ] 우측 상단에 **닫기(X)** 버튼 추가
- [ ] 닫기 클릭 시 **종료 확인 모달** 표시
  - 문구: "바둑돌 부수기를 종료할까요?"
  - 버튼: "취소" / "종료"
- 📍 위치: `App.tsx` 헤더 영역

#### TODO 2: 연령 등급 표시
- [ ] 앱 시작 시 **"전체이용가"** 배지 표시
- [ ] 우측 상단에 3초 이상 표시 후 자동 fade out
- [ ] 스토리 인트로보다 먼저 또는 함께 표시
- 📍 위치: `App.tsx` useEffect 또는 별도 컴포넌트

#### TODO 3: granite.config.mts 생성
- [ ] 프로젝트 루트에 `granite.config.mts` 파일 생성
- [ ] 브랜드 설정:
  ```typescript
  export default {
    brand: {
      displayName: '바둑돌 부수기',
      icon: '/logo.png',  // 600x600px PNG 필요
      primaryColor: '#1a1a2e'
    }
  }
  ```

#### TODO 4: 앱 로고 제작
- [ ] **600×600px PNG** 로고 제작
- [ ] 각진 정사각형 (둥근 모서리 불가)
- [ ] 컬러 배경 포함
- [ ] 라이트/다크 모드 모두 가독성 확보
- 📍 위치: `/public/logo.png`

#### TODO 5: 풀스크린 대응
- [ ] `max-width: 500px` 제거 또는 배경 처리
- [ ] 와이드 디바이스에서 좌우 빈 영역 없도록 수정
- [ ] 레터박싱 방지
- 📍 위치: `App.css` .app 클래스

---

### 🟡 권장 (UX 개선)

#### TODO 6: 터치 영역 확대
- [ ] 모든 버튼 최소 **44×44px** 확보
- [ ] 현재 네비게이션 버튼: `padding: 8px 12px` → 약 36×40px (작음)
- [ ] `.nav-btn` 패딩 증가: `padding: 10px 16px`
- 📍 위치: `App.css`

#### TODO 7: 명도 대비 개선
- [ ] `--text-secondary: #a0a0a0` → 더 밝은 색상 검토
- [ ] WCAG AA 기준 4.5:1 대비율 확보
- 📍 위치: `App.css` :root

---

### 🟢 선택 (수익화)

#### TODO 8: 토스 로그인 연동
- [ ] 토스 SDK 설치
- [ ] 로그인 버튼 추가
- [ ] 유저 정보 저장

#### TODO 9: 인앱결제 연동
- [ ] KYC 완료 후 진행
- [ ] 루비 패키지 상품 등록
- [ ] 결제 API 연동

#### TODO 10: 보상형 광고 연동
- [ ] AdMob 또는 토스 광고 SDK 연동
- [ ] 광고 위치 설정:
  - 강화 실패 시 "광고 보고 재도전"
  - 오프라인 보상 2배
  - 일일 무료 루비

---

## 📊 컴플라이언스 체크 결과 (2025-12-05)

| 요구사항 | 상태 | 비고 |
|----------|------|------|
| Safe Area 대응 | ✅ | `env(safe-area-inset-bottom)` |
| 로딩 20초 이내 | ✅ | Vite SPA |
| 사행성 금지 | ✅ | 환금 없음 |
| 구독 상품 금지 | ✅ | 일회성 구매만 |
| 내비게이션 바 | ❌ | TODO 1 |
| 연령 등급 표시 | ❌ | TODO 2 |
| granite.config.mts | ❌ | TODO 3 |
| 앱 로고 600×600px | ❌ | TODO 4 |
| 풀스크린 대응 | ⚠️ | TODO 5 |
| 터치 영역 44px | ⚠️ | TODO 6 |

**출시 가능 여부: ❌ TODO 1~5 완료 필요**

---

*마지막 업데이트: 2025-12-05*
*출처: 앱인토스 개발자센터 (developers-apps-in-toss.toss.im)*
